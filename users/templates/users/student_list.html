<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Student List</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css"
    />
    <style>
      .btn-action {
        padding: 0.25rem 0.5rem;
        font-size: 0.875rem;
        margin: 0 2px;
      }
    </style>
  </head>
  <body>
    <div class="container mt-4">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h1><i class="bi bi-people"></i> Student List</h1>
        <a href="{% url 'student_create' %}" class="btn btn-primary">
          <i class="bi bi-plus-circle"></i> Add New Student
        </a>
      </div>

      {% if students %}
      <div class="table-responsive">
        <table class="table table-striped table-hover">
          <thead class="table-dark">
            <tr>
              <th>#</th>
              <th>Name</th>
              <th>Email</th>
              <th>Username</th>
              <th>Student ID</th>
              <th>Department</th>
              <th>Phone</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for student in students %}
            <tr>
              <td>{{ forloop.counter }}</td>
              <td>{{ student.first_name }} {{ student.last_name }}</td>
              <td>{{ student.email }}</td>
              <td>{{ student.username }}</td>
              <td>{{ student.student_id|default:"-" }}</td>
              <td>{{ student.department.name|default:"Not assigned" }}</td>
              <td>{{ student.phone|default:"-" }}</td>
              <td>
                <div class="btn-group" role="group">
                  <a
                    href="{% url 'student_detail' student.pk %}"
                    class="btn btn-info btn-action"
                    >View</a
                  >
                  <a
                    href="{% url 'student_update' student.pk %}"
                    class="btn btn-warning btn-action"
                    >Edit</a
                  >
                  <a
                    href="{% url 'student_delete' student.pk %}"
                    class="btn btn-danger btn-action"
                    >Delete</a
                  >
                </div>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

      <!-- Pagination (optional) -->
      <nav aria-label="Student pagination">
        <ul class="pagination justify-content-center">
          <li class="page-item disabled">
            <a class="page-link" href="#" tabindex="-1">Previous</a>
          </li>
          <li class="page-item active"><a class="page-link" href="#">1</a></li>
          <li class="page-item"><a class="page-link" href="#">2</a></li>
          <li class="page-item"><a class="page-link" href="#">3</a></li>
          <li class="page-item">
            <a class="page-link" href="#">Next</a>
          </li>
        </ul>
      </nav>
      {% else %}
      <div class="alert alert-info text-center" role="alert">
        <h4 class="alert-heading">
          <i class="bi bi-info-circle"></i> No Students Found
        </h4>
        <p>
          There are no students in the system yet. Would you like to add one?
        </p>
        <hr />
        <a href="{% url 'student_create' %}" class="btn btn-primary">
          <i class="bi bi-plus-circle"></i> Add First Student
        </a>
      </div>
      {% endif %}

      <div class="mt-3">
        <a href="{% url 'home' %}" class="btn btn-secondary">
          <i class="bi bi-house"></i> Back to Home
        </a>
        <span class="badge bg-info text-dark ms-2">
          Total Students: {{ students|length }}
        </span>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
